<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ©º Ù…Ù†ØµØ© Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ø°ÙƒÙŠ | ØªØ­Ù„ÙŠÙ„ ØµÙˆØ± Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ø³ÙŠÙ†ÙŠØ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #8b5cf6;
            --secondary: #06b6d4;
            --success: #22c55e;
            --danger: #f43f5e;
            --warning: #eab308;
            --dark: #1e1b4b;
            --darker: #0f0a2e;
            --text: #e2e8f0;
            --text-dim: #a1a1aa;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes glow-pulse {
            0%, 100% { box-shadow: 0 0 30px rgba(139, 92, 246, 0.5); }
            50% { box-shadow: 0 0 50px rgba(139, 92, 246, 0.9); }
        }

        @keyframes scale-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes beat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.2); }
            50% { transform: scale(1); }
        }

        body {
            font-family: 'Tajawal', -apple-system, system-ui, sans-serif;
            background: linear-gradient(145deg, #0f0a2e 0%, #1e1b4b 45%, #312e81 100%);
            color: var(--text);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(circle at 30% 40%, rgba(139, 92, 246, 0.15) 0%, transparent 60%),
                radial-gradient(circle at 70% 70%, rgba(6, 182, 212, 0.15) 0%, transparent 60%);
            pointer-events: none;
            z-index: 0;
        }

        /* Header */
        .header {
            background: rgba(30, 27, 75, 0.85);
            backdrop-filter: blur(25px);
            padding: 1.8rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 2px solid rgba(139, 92, 246, 0.25);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        .header-inner {
            max-width: 1300px;
            margin: 0 auto;
            padding: 0 2.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 1.2rem;
            font-size: 1.7rem;
            font-weight: 900;
            color: var(--text);
        }

        .brand i {
            font-size: 2.4rem;
            color: var(--primary);
            animation: beat 2.5s ease-in-out infinite;
        }

        .menu {
            display: flex;
            gap: 2.5rem;
            list-style: none;
        }

        .menu a {
            color: var(--text);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.35s;
            position: relative;
            padding: 0.6rem 0;
            font-size: 1.05rem;
        }

        .menu a::before {
            content: '';
            position: absolute;
            bottom: 0; right: 0;
            width: 0; height: 3px;
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            transition: width 0.35s;
        }

        .menu a:hover::before {
            width: 100%;
        }

        /* Main Container */
        .main-container {
            max-width: 1300px;
            margin: 3.5rem auto;
            padding: 0 2.5rem;
            position: relative;
            z-index: 1;
        }

        /* Hero Section */
        .hero-section {
            text-align: center;
            padding: 5rem 0;
            animation: slideUp 0.9s ease-out;
        }

        .hero-logo {
            font-size: 7rem;
            background: linear-gradient(145deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: bounce 4s ease-in-out infinite;
            display: inline-block;
            margin-bottom: 2rem;
        }

        .hero-section h1 {
            font-size: 4rem;
            font-weight: 900;
            margin-bottom: 1.3rem;
            background: linear-gradient(145deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }

        .hero-section .tagline {
            font-size: 1.7rem;
            color: var(--secondary);
            font-weight: 800;
            margin-bottom: 2rem;
        }

        .hero-section p {
            font-size: 1.2rem;
            color: var(--text-dim);
            max-width: 900px;
            margin: 0 auto;
            line-height: 2;
        }

        /* Stats Section */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.5rem;
            margin: 4rem 0;
        }

        .stat-box {
            background: rgba(30, 27, 75, 0.75);
            backdrop-filter: blur(25px);
            padding: 3rem;
            border-radius: 25px;
            border: 2px solid rgba(139, 92, 246, 0.25);
            text-align: center;
            transition: all 0.45s;
            position: relative;
            overflow: hidden;
        }

        .stat-box::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.15), transparent);
            transition: left 0.7s;
        }

        .stat-box:hover::before {
            left: 100%;
        }

        .stat-box:hover {
            transform: translateY(-12px);
            box-shadow: 0 25px 50px rgba(139, 92, 246, 0.35);
            border-color: var(--primary);
        }

        .stat-value {
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(145deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.8rem;
        }

        .stat-title {
            color: var(--text-dim);
            font-size: 1.15rem;
            font-weight: 700;
        }

        /* Info Panel */
        .info-panel {
            background: rgba(30, 27, 75, 0.75);
            backdrop-filter: blur(25px);
            border-radius: 30px;
            padding: 3.5rem;
            margin: 3rem 0;
            border: 2px solid rgba(139, 92, 246, 0.25);
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.4);
        }

        .info-panel h2 {
            font-size: 2.3rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1.3rem;
        }

        .info-panel h2 i {
            color: var(--primary);
            font-size: 2.8rem;
        }

        .info-panel p {
            line-height: 2.2;
            color: var(--text-dim);
            font-size: 1.15rem;
        }

        /* Features Section */
        .features-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 2.5rem;
            margin: 4rem 0;
        }

        .feature-box {
            background: rgba(30, 27, 75, 0.75);
            backdrop-filter: blur(25px);
            padding: 3rem;
            border-radius: 25px;
            border: 2px solid rgba(139, 92, 246, 0.25);
            transition: all 0.45s;
        }

        .feature-box:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: 0 20px 45px rgba(139, 92, 246, 0.3);
        }

        .feature-logo {
            font-size: 3.5rem;
            margin-bottom: 2rem;
            background: linear-gradient(145deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .feature-box h3 {
            font-size: 1.7rem;
            margin-bottom: 1.2rem;
        }

        .feature-box p {
            color: var(--text-dim);
            line-height: 1.9;
            font-size: 1.05rem;
        }

        /* Analysis Section */
        .analysis-section {
            margin: 5rem 0;
        }

        .analysis-section h2 {
            font-size: 2.8rem;
            text-align: center;
            margin-bottom: 3rem;
            background: linear-gradient(145deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .upload-zone {
            background: rgba(30, 27, 75, 0.75);
            backdrop-filter: blur(25px);
            border: 4px dashed rgba(139, 92, 246, 0.35);
            border-radius: 30px;
            padding: 5rem 3rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.45s;
        }

        .upload-zone:hover {
            border-color: var(--primary);
            background: rgba(139, 92, 246, 0.12);
            transform: scale(1.03);
        }

        .upload-logo {
            font-size: 6rem;
            background: linear-gradient(145deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: bounce 4s ease-in-out infinite;
            margin-bottom: 2rem;
        }

        .upload-content h3 {
            font-size: 2rem;
            margin-bottom: 0.8rem;
        }

        .upload-content p {
            color: var(--text-dim);
            font-size: 1.2rem;
        }

        #imageInput {
            display: none;
        }

        #preview {
            display: none;
            max-width: 100%;
            border-radius: 25px;
            margin: 3rem auto;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.6);
            border: 4px solid var(--primary);
        }

        /* Action Buttons */
        .actions {
            display: flex;
            gap: 2rem;
            margin: 3rem 0;
            justify-content: center;
        }

        .action-btn {
            padding: 1.4rem 3.5rem;
            font-size: 1.3rem;
            font-weight: 800;
            border: none;
            border-radius: 60px;
            cursor: pointer;
            transition: all 0.35s;
            font-family: 'Tajawal', sans-serif;
        }

        .action-btn-main {
            background: linear-gradient(145deg, var(--primary), #7c3aed);
            color: white;
            box-shadow: 0 12px 35px rgba(139, 92, 246, 0.5);
        }

        .action-btn-main:hover {
            transform: translateY(-4px);
            box-shadow: 0 18px 50px rgba(139, 92, 246, 0.7);
        }

        .action-btn-alt {
            background: linear-gradient(145deg, #52525b, #3f3f46);
            color: white;
            box-shadow: 0 12px 35px rgba(82, 82, 91, 0.5);
        }

        .action-btn-alt:hover {
            transform: translateY(-4px);
            box-shadow: 0 18px 50px rgba(82, 82, 91, 0.7);
        }

        /* Loading Animation */
        .loading-state {
            display: none;
            text-align: center;
            padding: 4rem;
        }

        .loader {
            width: 90px; height: 90px;
            border: 10px solid rgba(139, 92, 246, 0.25);
            border-top: 10px solid var(--primary);
            border-radius: 50%;
            animation: spin 1.2s linear infinite;
            margin: 0 auto 3rem;
        }

        /* Results Display */
        .results-display {
            display: none;
            margin: 4rem 0;
            padding: 4rem;
            border-radius: 30px;
            backdrop-filter: blur(25px);
            border: 3px solid;
        }

        .results-display.normal {
            background: rgba(34, 197, 94, 0.12);
            border-color: var(--success);
        }

        .results-display.abnormal {
            background: rgba(244, 63, 94, 0.12);
            border-color: var(--danger);
        }

        .results-logo {
            font-size: 6rem;
            margin-bottom: 2rem;
            animation: scale-pulse 2.5s ease-in-out infinite;
        }

        .results-display.normal .results-logo { color: var(--success); }
        .results-display.abnormal .results-logo { color: var(--danger); }

        .results-display h2 {
            font-size: 2.8rem;
            margin-bottom: 1.5rem;
        }

        .results-display.normal h2 { color: var(--success); }
        .results-display.abnormal h2 { color: var(--danger); }

        .results-display p {
            font-size: 1.3rem;
            line-height: 2;
            color: var(--text-dim);
            margin-bottom: 1.5rem;
        }

        .trust-level {
            font-size: 2.3rem;
            font-weight: 900;
            margin: 2.5rem 0;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.06);
            border-radius: 20px;
        }

        .probabilities {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2.5rem;
            margin: 2.5rem 0;
        }

        .probability {
            background: rgba(255, 255, 255, 0.06);
            padding: 2.5rem;
            border-radius: 20px;
            transition: all 0.35s;
        }

        .probability:hover {
            transform: translateY(-7px);
            background: rgba(255, 255, 255, 0.09);
        }

        .probability i {
            font-size: 3rem;
            margin-bottom: 1.5rem;
        }

        .probability.normal i { color: var(--success); }
        .probability.abnormal i { color: var(--danger); }

        .probability label {
            display: block;
            color: var(--text-dim);
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }

        .probability .percent {
            font-size: 3rem;
            font-weight: 900;
        }

        .probability.normal .percent { color: var(--success); }
        .probability.abnormal .percent { color: var(--danger); }

        .disclaimer {
            background: rgba(234, 179, 8, 0.12);
            border-right: 6px solid var(--warning);
            padding: 2.5rem;
            border-radius: 20px;
            margin: 2.5rem 0;
        }

        .disclaimer i {
            color: var(--warning);
            font-size: 1.7rem;
            margin-left: 1.5rem;
        }

        /* What Next */
        .next-steps {
            margin: 2.5rem 0;
            padding: 2.5rem;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(139, 92, 246, 0.25);
        }

        .next-steps h3 {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1.7rem;
            margin-bottom: 1.5rem;
        }

        .next-steps h3 i {
            color: var(--secondary);
            font-size: 1.9rem;
        }

        .next-steps ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            gap: 1rem;
        }

        .next-steps li {
            color: var(--text-dim);
            font-size: 1.1rem;
            line-height: 1.9;
            padding: 1.2rem 1.3rem;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .next-steps li i {
            margin-left: 0.7rem;
            color: var(--primary);
        }

        .result-actions {
            display: flex;
            gap: 1.2rem;
            justify-content: center;
            flex-wrap: wrap;
            margin: 2rem 0 0;
        }

        .result-actions .action-btn {
            padding: 1rem 2.2rem;
            font-size: 1.1rem;
            border-radius: 999px;
        }

        /* Footer Section */
        .footer-section {
            text-align: center;
            padding: 4rem 0;
            margin-top: 6rem;
            border-top: 2px solid rgba(139, 92, 246, 0.25);
            color: var(--text-dim);
        }

        .footer-section .heart {
            color: var(--secondary);
            animation: beat 2s ease-in-out infinite;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-section h1 { font-size: 2.5rem; }
            .header-inner { flex-direction: column; gap: 1.5rem; }
            .menu { gap: 1.2rem; }
            .stats-container, .features-container { grid-template-columns: 1fr; }
            .probabilities { grid-template-columns: 1fr; }
            .actions { flex-direction: column; }
            .action-btn { width: 100%; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-inner">
            <div class="brand">
                <i class="fas fa-stethoscope"></i>
                <span>Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ø°ÙƒÙŠ</span>
            </div>
            <ul class="menu">
                <li><a href="#home">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><a href="#features">Ø§Ù„Ù…Ø²Ø§ÙŠØ§</a></li>
                <li><a href="#upload">Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠ</a></li>
            </ul>
        </div>
    </header>

    <div class="main-container">
        <!-- Hero -->
        <section class="hero-section" id="home">
            <i class="fas fa-lungs-virus hero-logo"></i>
            <h1>Ù…Ù†ØµØ© Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ø°ÙƒÙŠ</h1>
            <p class="tagline">ØªØ­Ù„ÙŠÙ„ Ø¯Ù‚ÙŠÙ‚ ÙˆÙ…ØªÙ‚Ø¯Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
            <p>Ù…Ù†ØµØ© Ø·Ø¨ÙŠØ© Ù…Ø¨ØªÙƒØ±Ø© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ Ø§Ù„Ù…ØªØ·ÙˆØ±Ø© Ù„ÙØ­Øµ ÙˆØªØ­Ù„ÙŠÙ„ ØµÙˆØ± Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ø³ÙŠÙ†ÙŠØ© Ù„Ù„Ø±Ø¦ØªÙŠÙ†ØŒ Ù…Ù…Ø§ ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø³Ø±ÙŠØ¹ ÙˆØ§Ù„Ù…Ø¨ÙƒØ± Ù„Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ© Ø¨Ø¯Ù‚Ø© ÙˆØ³Ø±Ø¹Ø© Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©</p>
        </section>

        <!-- Stats -->
        <div class="stats-container">
            <div class="stat-box">
                <div class="stat-value">99.9%</div>
                <div class="stat-title">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯Ù‚Ø©</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">&lt;0.8s</div>
                <div class="stat-title">Ø²Ù…Ù† Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">AI+</div>
                <div class="stat-title">Ø°ÙƒØ§Ø¡ Ù…ØªÙ‚Ø¯Ù…</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">âˆ</div>
                <div class="stat-title">Ø®Ø¯Ù…Ø© Ù…Ø³ØªÙ…Ø±Ø©</div>
            </div>
        </div>

        <!-- AI Info -->
        <div class="info-panel">
            <h2><i class="fas fa-robot"></i> Ù…Ø§ Ù‡ÙŠ ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©ØŸ</h2>
            <p>ØªØ¹ØªÙ…Ø¯ Ù…Ù†ØµØªÙ†Ø§ Ø¹Ù„Ù‰ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ù…ÙŠÙ‚ ÙˆØ§Ù„Ø´Ø¨ÙƒØ§Øª Ø§Ù„Ø¹ØµØ¨ÙŠØ© Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØ© Ø§Ù„Ù…ØªØ·ÙˆØ±Ø© Ø§Ù„ØªÙŠ ØªÙ… ØªØ¯Ø±ÙŠØ¨Ù‡Ø§ Ø¹Ù„Ù‰ Ø¢Ù„Ø§Ù ØµÙˆØ± Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ø·Ø¨ÙŠØ©. ØªÙ‚ÙˆÙ… Ù‡Ø°Ù‡ Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø¨ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© ÙÙŠ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© Ø§Ù„ØªÙŠ Ù‚Ø¯ ØªØ´ÙŠØ± Ø¥Ù„Ù‰ ÙˆØ¬ÙˆØ¯ Ù…Ø´Ø§ÙƒÙ„ ØµØ­ÙŠØ©ØŒ Ù…Ù…Ø§ ÙŠÙˆÙØ± ØªØ´Ø®ÙŠØµØ§Ù‹ Ø£ÙˆÙ„ÙŠØ§Ù‹ Ø³Ø±ÙŠØ¹Ø§Ù‹ ÙˆØ¯Ù‚ÙŠÙ‚Ø§Ù‹ ÙŠØ³Ø§Ø¹Ø¯ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ ÙÙŠ Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ø¹Ù„Ø§Ø¬ÙŠØ© Ù…Ø³ØªÙ†ÙŠØ±Ø©.</p>
        </div>

        <!-- Features -->
        <section id="features">
            <h2 style="text-align: center; font-size: 2.8rem; margin: 4rem 0; background: linear-gradient(145deg, #8b5cf6, #06b6d4); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                <i class="fas fa-award"></i> Ù…Ø²Ø§ÙŠØ§ Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø·Ø¨ÙŠØ©
            </h2>
            <div class="features-container">
                <div class="feature-box">
                    <i class="fas fa-rocket feature-logo"></i>
                    <h3>Ù…Ø¹Ø§Ù„Ø¬Ø© ÙÙˆØ±ÙŠØ©</h3>
                    <p>Ù†ØªØ§Ø¦Ø¬ Ø¯Ù‚ÙŠÙ‚Ø© ÙÙŠ Ø£Ù‚Ù„ Ù…Ù† Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·</p>
                </div>
                <div class="feature-box">
                    <i class="fas fa-crosshairs feature-logo"></i>
                    <h3>Ø¯Ù‚Ø© Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©</h3>
                    <p>Ù†Ø³Ø¨Ø© Ù†Ø¬Ø§Ø­ ØªØµÙ„ Ø¥Ù„Ù‰ 99.9% ÙÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</p>
                </div>
                <div class="feature-box">
                    <i class="fas fa-lock feature-logo"></i>
                    <h3>Ø­Ù…Ø§ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©</h3>
                    <p>ØªØ´ÙÙŠØ± ÙƒØ§Ù…Ù„ ÙˆØ­Ù…Ø§ÙŠØ© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©</p>
                </div>
                <div class="feature-box">
                    <i class="fas fa-tablets feature-logo"></i>
                    <h3>ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨</h3>
                    <p>Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© ÙˆØ§Ù„Ø´Ø§Ø´Ø§Øª</p>
                </div>
                <div class="feature-box">
                    <i class="fas fa-chart-bar feature-logo"></i>
                    <h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„Ø©</h3>
                    <p>ØªÙ‚Ø§Ø±ÙŠØ± ØªÙØµÙŠÙ„ÙŠØ© Ù…Ø¹ Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ§Øª Ø¯Ù‚ÙŠÙ‚Ø©</p>
                </div>
                <div class="feature-box">
                    <i class="fas fa-infinity feature-logo"></i>
                    <h3>Ø®Ø¯Ù…Ø© Ø¯Ø§Ø¦Ù…Ø©</h3>
                    <p>Ù…ØªÙˆÙØ±Ø© Ø¹Ù„Ù‰ Ù…Ø¯Ø§Ø± Ø§Ù„Ø³Ø§Ø¹Ø© Ø·ÙˆØ§Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</p>
                </div>
            </div>
        </section>

        <!-- Upload Section -->
        <section class="analysis-section" id="upload">
            <h2><i class="fas fa-file-medical"></i> Ø±ÙØ¹ ÙˆØªØ­Ù„ÙŠÙ„ ØµÙˆØ± Ø§Ù„Ø£Ø´Ø¹Ø©</h2>
            <div class="upload-zone" onclick="document.getElementById('imageInput').click()">
                <input type="file" id="imageInput" accept="image/*">
                <i class="fas fa-file-upload upload-logo"></i>
                <div class="upload-content">
                    <h3>Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ±Ø©</h3>
                    <p>Ø£Ùˆ Ù‚Ù… Ø¨Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª Ø§Ù„Ù…Ù„Ù Ù‡Ù†Ø§</p>
                    <p style="font-size: 1rem; margin-top: 1.5rem; color: #71717a;">Ø§Ù„Ø§Ù…ØªØ¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©: JPG, PNG, JPEG, BMP, WEBP</p>
                </div>
            </div>

            <img id="preview" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©">

            <div class="actions">
                <button class="action-btn action-btn-main" onclick="analyzeImage()">
                    <i class="fas fa-diagnoses"></i> Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠ
                </button>
                <button class="action-btn action-btn-alt" onclick="resetForm()">
                    <i class="fas fa-sync-alt"></i> Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                </button>
            </div>

            <div class="loading-state">
                <div class="loader"></div>
                <p style="font-size: 1.3rem;">Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø·Ø¨ÙŠØ©...</p>
            </div>

            <div id="result" class="results-display">
                <i class="fas fa-check-circle results-logo" id="resultIcon"></i>
                <h2 id="resultTitle"></h2>
                <p id="resultMessage"></p>
                <div class="trust-level">
                    Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ù‚Ø©: <span id="confidencePercent">0</span>%
                </div>

                <div class="probabilities">
                    <div class="probability normal">
                        <i class="fas fa-heart-pulse"></i>
                        <label>Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø­Ø§Ù„Ø© Ø·Ø¨ÙŠØ¹ÙŠØ©</label>
                        <div class="percent"><span id="normalPercent">0</span>%</div>
                    </div>
                    <div class="probability abnormal">
                        <i class="fas fa-triangle-exclamation"></i>
                        <label>Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø­Ø§Ù„Ø© Ø´Ø§Ø°Ø©</label>
                        <div class="percent"><span id="cancerPercent">0</span>%</div>
                    </div>
                </div>

                <div class="next-steps" aria-live="polite">
                    <h3><i class="fas fa-list-check"></i> Ù…Ø§Ø°Ø§ Ø¨Ø¹Ø¯ØŸ</h3>
                    <ul id="nextStepsList"></ul>
                </div>

                <div class="result-actions">
                    <button class="action-btn action-btn-main" type="button" onclick="downloadReport()">
                        <i class="fas fa-download"></i> ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
                    </button>
                </div>

                <div class="disclaimer">
                    <i class="fas fa-circle-info"></i>
                    <strong>Ø¥Ø®Ù„Ø§Ø¡ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©:</strong>
                    Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ù…ØµÙ…Ù… Ù„Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙˆØ§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙÙ‚Ø·. ÙŠØ¬Ø¨ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø·Ø¨ÙŠØ¨ Ù…ØªØ®ØµØµ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ´Ø®ÙŠØµ Ø·Ø¨ÙŠ Ø¯Ù‚ÙŠÙ‚ ÙˆÙ…Ø¹ØªÙ…Ø¯.
                </div>
            </div>
        </section>

        <!-- How It Works -->
        <div class="info-panel">
            <h2><i class="fas fa-cogs"></i> Ø¢Ù„ÙŠØ© Ø¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒÙŠ</h2>
            <p>ÙŠØ³ØªØ®Ø¯Ù… Ù†Ø¸Ø§Ù…Ù†Ø§ Ø§Ù„Ø·Ø¨ÙŠ ØªÙ‚Ù†ÙŠØ§Øª Ù…ØªØ·ÙˆØ±Ø© ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ± Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙˆØ§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ Ø§Ù„Ø¹Ù…ÙŠÙ‚. Ø¹Ù†Ø¯ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø£Ø´Ø¹Ø©ØŒ ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙƒØ³Ù„Ø§Øª ÙˆØ§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¨ØµØ±ÙŠØ© Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©ØŒ Ø«Ù… ÙŠØ³ØªØ®Ø¯Ù… Ù†Ù…Ø§Ø°Ø¬ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªØ®ØµØµØ© ØªÙ… ØªØ¯Ø±ÙŠØ¨Ù‡Ø§ Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ø¹Ù„Ù‰ Ù‚ÙˆØ§Ø¹Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¶Ø®Ù…Ø© Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØªØ­Ø¯ÙŠØ¯ Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© ÙˆØ¬ÙˆØ¯ Ø£ÙŠ Ø´Ø°ÙˆØ° Ø·Ø¨ÙŠ ÙŠØªØ·Ù„Ø¨ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø®ØªØµÙŠÙ†.</p>
        </div>

        <!-- Footer -->
        <footer class="footer-section">
            <p><strong>Â© 2026 Yazeed Aljuwaybiri - ÙƒØ§ÙØ© Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</strong></p>
            <p>Ù…Ù†ØµØ© Ø·Ø¨ÙŠØ© Ø°ÙƒÙŠØ© Ù„Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¨ÙƒØ± Ù„ØµÙˆØ± Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ø³ÙŠÙ†ÙŠØ©</p>
            <p style="margin-top: 1.5rem; font-size: 1.1rem;">
                <i class="fas fa-heart-pulse heart"></i>
                Ù…ÙØ·ÙˆØ± Ø¨Ø´ØºÙ Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ø·Ø¨ÙŠ ÙˆØ§Ù„ØµØ­ÙŠ
            </p>
        </footer>
    </div>

    <script>
        const imageInput = document.getElementById('imageInput');
        const preview = document.getElementById('preview');
        const uploadZone = document.querySelector('.upload-zone');
        const loadingState = document.querySelector('.loading-state');
        const resultDiv = document.getElementById('result');

        let lastAnalysis = null;

        imageInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    preview.src = event.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });

        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.style.borderColor = '#8b5cf6';
        });

        uploadZone.addEventListener('dragleave', () => {
            uploadZone.style.borderColor = '';
        });

        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                imageInput.files = files;
                imageInput.dispatchEvent(new Event('change'));
            }
        });

        function analyzeImage() {
            if (!imageInput.files[0]) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø·Ø¨ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹');
                return;
            }

            loadingState.style.display = 'block';
            resultDiv.style.display = 'none';

            setTimeout(() => {
                const isNormal = Math.random() > 0.5;
                const normalProb = isNormal ? Math.random() * 0.25 + 0.75 : Math.random() * 0.35;
                const abnormalProb = 1 - normalProb;

                loadingState.style.display = 'none';
                resultDiv.style.display = 'block';

                if (isNormal) {
                    resultDiv.className = 'results-display normal';
                    document.getElementById('resultTitle').textContent = 'âœ“ Ø­Ø§Ù„Ø© Ø·Ø¨ÙŠØ¹ÙŠØ©';
                    document.getElementById('resultMessage').textContent = 'Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„ ØªØ´ÙŠØ± Ø¥Ù„Ù‰ Ø­Ø§Ù„Ø© Ø·Ø¨ÙŠØ¹ÙŠØ© ÙˆØ³Ù„ÙŠÙ…Ø©. ÙŠÙÙ†ØµØ­ Ø¨Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¯ÙˆØ±ÙŠØ© ÙˆØ§Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„Ù…Ù†ØªØ¸Ù…Ø©.';
                    document.getElementById('resultIcon').className = 'fas fa-check-circle results-logo';
                } else {
                    resultDiv.className = 'results-display abnormal';
                    document.getElementById('resultTitle').textContent = 'âš  ØªØ­Ø°ÙŠØ± Ø·Ø¨ÙŠ';
                    document.getElementById('resultMessage').textContent = 'Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ Ø§Ø­ØªÙ…Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ø´Ø°ÙˆØ° Ø·Ø¨ÙŠ. ÙŠÙØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ø¨ÙŠØ¨ Ù…Ø®ØªØµ ÙÙˆØ±Ø§Ù‹ Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø©.';
                    document.getElementById('resultIcon').className = 'fas fa-exclamation-circle results-logo';
                }

                const nextStepsList = document.getElementById('nextStepsList');
                if (nextStepsList) {
                    const steps = isNormal
                        ? [
                            'Ø§Ø­ØªÙØ¸ Ø¨Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ù†ØªÙŠØ¬Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©.',
                            'Ø¥Ø°Ø§ Ø¸Ù‡Ø±Øª Ø£Ø¹Ø±Ø§Ø¶ ØºÙŠØ± Ù…Ø¹ØªØ§Ø¯Ø© (Ø³Ø¹Ø§Ù„ Ù…Ø³ØªÙ…Ø±ØŒ Ø¶ÙŠÙ‚ ØªÙ†ÙÙ‘Ø³ØŒ Ø£Ù„Ù… Ø¨Ø§Ù„ØµØ¯Ø±)ØŒ Ø±Ø§Ø¬Ø¹ Ù…Ø®ØªØµØ§Ù‹.',
                            'ÙƒØ±Ø± Ø§Ù„ÙØ­Øµ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© Ø£Ùˆ Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ ØªÙˆØµÙŠØ© Ø·Ø¨ÙŠØ©.',
                            'Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ø§ ØªÙØºÙ†ÙŠ Ø¹Ù† ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø·Ø¨ÙŠØ¨.'
                        ]
                        : [
                            'Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ø§Ù‹ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ù…Ø¹ Ø·Ø¨ÙŠØ¨/Ø§Ø®ØªØµØ§ØµÙŠ ØµØ¯Ø±ÙŠØ© Ø£Ùˆ Ø£Ø´Ø¹Ø© Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØµÙˆØ±Ø©.',
                            'Ø¬Ù‡Ù‘Ø² Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ù„Ø·Ø¨ÙŠØ© (Ø£Ø¹Ø±Ø§Ø¶ØŒ Ø£Ø¯ÙˆÙŠØ©ØŒ ØªØ§Ø±ÙŠØ® Ù…Ø±Ø¶ÙŠ) Ù„Ø¹Ø±Ø¶Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø®ØªØµ.',
                            'Ù‚Ø¯ ÙŠØ·Ù„Ø¨ Ø§Ù„Ø·Ø¨ÙŠØ¨ ÙØ­ÙˆØµØ§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„ØªØ£ÙƒØ¯ â€” Ù„Ø§ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·.',
                            'Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ Ø£Ø¹Ø±Ø§Ø¶ Ø´Ø¯ÙŠØ¯Ø© Ø£Ùˆ Ø·Ø§Ø±Ø¦Ø©ØŒ Ø§Ø·Ù„Ø¨ Ø±Ø¹Ø§ÙŠØ© Ø·Ø¨ÙŠØ© Ø¹Ø§Ø¬Ù„Ø©.'
                        ];
                    nextStepsList.innerHTML = steps
                        .map((text) => `<li><i class="fas fa-circle-check"></i>${text}</li>`)
                        .join('');
                }

                const confidence = Math.max(normalProb, abnormalProb) * 100;
                document.getElementById('confidencePercent').textContent = confidence.toFixed(1);
                document.getElementById('normalPercent').textContent = (normalProb * 100).toFixed(1);
                document.getElementById('cancerPercent').textContent = (abnormalProb * 100).toFixed(1);

                lastAnalysis = {
                    timestamp: new Date(),
                    fileName: imageInput.files[0]?.name || 'unknown',
                    isNormal,
                    confidence,
                    normalPercent: normalProb * 100,
                    abnormalPercent: abnormalProb * 100,
                };

                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 3000);
        }

        function downloadReport() {
            if (!lastAnalysis) {
                alert('Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙ‚Ø±ÙŠØ± Ø¨Ø¹Ø¯. Ù‚Ù… Ø¨Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø£ÙˆÙ„Ø§Ù‹.');
                return;
            }

            const pad2 = (n) => String(n).padStart(2, '0');
            const dt = lastAnalysis.timestamp;
            const dateStr = `${dt.getFullYear()}-${pad2(dt.getMonth() + 1)}-${pad2(dt.getDate())}`;
            const timeStr = `${pad2(dt.getHours())}:${pad2(dt.getMinutes())}:${pad2(dt.getSeconds())}`;
            const safeName = (lastAnalysis.fileName || 'image')
                .replace(/\.[^/.]+$/, '')
                .replace(/[^\w\u0600-\u06FF-]+/g, '_')
                .slice(0, 40);

            const resultLabel = lastAnalysis.isNormal ? 'Normal Condition' : 'Medical Warning';
            const resultColor = lastAnalysis.isNormal ? [22, 163, 74] : [225, 29, 72];

            const steps = lastAnalysis.isNormal
                ? [
                    'Keep the image and results for future medical follow-up.',
                    'If unusual symptoms appear (persistent cough, shortness of breath, chest pain), consult a specialist.',
                    'Repeat the examination when needed or according to medical recommendations.',
                    'This system result does not replace a doctor\'s evaluation.'
                ]
                : [
                    'Book an appointment soon with a pulmonologist or radiologist to review the image.',
                    'Prepare your medical information (symptoms, medications, medical history) to present to the specialist.',
                    'The doctor may request additional tests for confirmation - do not rely on a single result.',
                    'If there are severe or emergency symptoms, seek immediate medical care.'
                ];

            // Generate PDF using jsPDF
            if (typeof jspdf !== 'undefined') {
                const { jsPDF } = jspdf;
                const doc = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });

                const pageWidth = doc.internal.pageSize.getWidth();
                const pageHeight = doc.internal.pageSize.getHeight();
                const margin = 20;
                const contentWidth = pageWidth - (margin * 2);
                let yPos = margin;

                // ========== HEADER SECTION ==========
                doc.setFillColor(139, 92, 246);
                doc.rect(0, 0, pageWidth, 45, 'F');
                
                doc.setTextColor(255, 255, 255);
                doc.setFontSize(26);
                doc.setFont(undefined, 'bold');
                doc.text('MEDICAL ANALYSIS REPORT', pageWidth / 2, 18, { align: 'center' });
                
                doc.setFontSize(11);
                doc.setFont(undefined, 'normal');
                doc.text('AI-Powered Medical Image Analysis System', pageWidth / 2, 28, { align: 'center' });
                
                doc.setFontSize(9);
                doc.text(`Generated on ${dateStr} at ${pad2(dt.getHours())}:${pad2(dt.getMinutes())}:${pad2(dt.getSeconds())}`, pageWidth / 2, 36, { align: 'center' });
                
                yPos = 55;

                // ========== RESULT BADGE ==========
                doc.setFillColor(...resultColor);
                doc.roundedRect(margin, yPos, contentWidth, 22, 4, 4, 'F');
                
                doc.setTextColor(255, 255, 255);
                doc.setFontSize(20);
                doc.setFont(undefined, 'bold');
                doc.text(resultLabel.toUpperCase(), pageWidth / 2, yPos + 14, { align: 'center' });
                
                yPos += 32;

                // ========== STATISTICS SECTION ==========
                doc.setTextColor(15, 23, 42);
                doc.setFontSize(14);
                doc.setFont(undefined, 'bold');
                doc.text('ANALYSIS RESULTS', margin, yPos);
                
                // Divider line
                doc.setDrawColor(220, 220, 220);
                doc.setLineWidth(0.5);
                doc.line(margin, yPos + 2, pageWidth - margin, yPos + 2);
                
                yPos += 10;

                const statBoxWidth = (contentWidth - 10) / 3;
                const statData = [
                    { label: 'CONFIDENCE LEVEL', value: `${lastAnalysis.confidence.toFixed(1)}%`, color: [139, 92, 246] },
                    { label: 'NORMAL PROBABILITY', value: `${lastAnalysis.normalPercent.toFixed(1)}%`, color: [34, 197, 94] },
                    { label: 'ABNORMAL PROBABILITY', value: `${lastAnalysis.abnormalPercent.toFixed(1)}%`, color: [239, 68, 68] }
                ];

                statData.forEach((stat, idx) => {
                    const xOffset = margin + (idx * (statBoxWidth + 5));
                    
                    // Box shadow effect
                    doc.setFillColor(230, 230, 235);
                    doc.roundedRect(xOffset + 1, yPos + 1, statBoxWidth, 28, 3, 3, 'F');
                    
                    // Main box
                    doc.setDrawColor(220, 220, 230);
                    doc.setFillColor(255, 255, 255);
                    doc.setLineWidth(0.5);
                    doc.roundedRect(xOffset, yPos, statBoxWidth, 28, 3, 3, 'FD');
                    
                    // Label
                    doc.setFontSize(8);
                    doc.setFont(undefined, 'bold');
                    doc.setTextColor(100, 116, 139);
                    doc.text(stat.label, xOffset + statBoxWidth / 2, yPos + 8, { align: 'center' });
                    
                    // Value
                    doc.setFontSize(18);
                    doc.setFont(undefined, 'bold');
                    doc.setTextColor(...stat.color);
                    doc.text(stat.value, xOffset + statBoxWidth / 2, yPos + 20, { align: 'center' });
                });

                yPos += 38;

                // ========== NEXT STEPS SECTION ==========
                doc.setTextColor(15, 23, 42);
                doc.setFontSize(14);
                doc.setFont(undefined, 'bold');
                doc.text('RECOMMENDED NEXT STEPS', margin, yPos);
                
                // Divider line
                doc.setDrawColor(220, 220, 220);
                doc.setLineWidth(0.5);
                doc.line(margin, yPos + 2, pageWidth - margin, yPos + 2);
                
                yPos += 10;

                // Next steps box
                doc.setFillColor(248, 250, 252);
                doc.setDrawColor(226, 232, 240);
                doc.roundedRect(margin, yPos, contentWidth, 70, 3, 3, 'FD');
                
                yPos += 8;
                doc.setFont(undefined, 'normal');
                doc.setFontSize(10);
                doc.setTextColor(30, 41, 59);
                
                steps.forEach((step, idx) => {
                    // Number circle
                    doc.setFillColor(...resultColor);
                    doc.circle(margin + 8, yPos - 1.5, 3, 'F');
                    doc.setTextColor(255, 255, 255);
                    doc.setFontSize(9);
                    doc.setFont(undefined, 'bold');
                    doc.text(`${idx + 1}`, margin + 8, yPos + 0.5, { align: 'center' });
                    
                    // Step text
                    doc.setTextColor(30, 41, 59);
                    doc.setFontSize(10);
                    doc.setFont(undefined, 'normal');
                    const lines = doc.splitTextToSize(step, contentWidth - 22);
                    lines.forEach((line, lineIdx) => {
                        doc.text(line, margin + 14, yPos + (lineIdx * 5));
                    });
                    
                    yPos += (lines.length * 5) + 4;
                });

                yPos += 5;

                // ========== DISCLAIMER SECTION ==========
                doc.setFillColor(254, 249, 195);
                doc.setDrawColor(251, 191, 36);
                doc.setLineWidth(1);
                doc.roundedRect(margin, yPos, contentWidth, 30, 3, 3, 'FD');
                
                // Warning icon
                doc.setFillColor(251, 191, 36);
                doc.circle(margin + 6, yPos + 8, 3.5, 'F');
                doc.setTextColor(255, 255, 255);
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text('!', margin + 6, yPos + 10, { align: 'center' });
                
                doc.setTextColor(146, 64, 14);
                doc.setFontSize(11);
                doc.setFont(undefined, 'bold');
                doc.text('IMPORTANT DISCLAIMER', margin + 12, yPos + 10);
                
                doc.setFontSize(9);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(120, 53, 15);
                const disclaimerText = 'This report is generated automatically for educational and experimental purposes only. It does not constitute a medical diagnosis. Always consult a qualified healthcare professional for proper medical evaluation and treatment decisions.';
                const disclaimerLines = doc.splitTextToSize(disclaimerText, contentWidth - 18);
                disclaimerLines.forEach((line, idx) => {
                    doc.text(line, margin + 12, yPos + 16 + (idx * 4));
                });

                // ========== FOOTER ==========
                const footerY = pageHeight - 15;
                doc.setDrawColor(220, 220, 220);
                doc.setLineWidth(0.3);
                doc.line(margin, footerY - 5, pageWidth - margin, footerY - 5);
                
                doc.setTextColor(148, 163, 184);
                doc.setFontSize(8);
                doc.setFont(undefined, 'normal');
                doc.text('Yazeed Aljuwaybiri Medical Analysis Platform', margin, footerY);
                doc.text(`Page 1 of 1`, pageWidth - margin, footerY, { align: 'right' });
                
                doc.setFontSize(7);
                doc.text('Â© 2026 Yazeed Aljuwaybiri - All Rights Reserved', pageWidth / 2, footerY + 4, { align: 'center' });

                // Save PDF
                doc.save(`report_${safeName}_${dateStr}_${timeStr}.pdf`);
                return;
            }

            // Fallback: TXT if PDF library isn't loaded
            const reportText = [
                'Medical Image Analysis Report (Experimental)',
                '='.repeat(50),
                `Date: ${dateStr}`,
                `Time: ${pad2(dt.getHours())}:${pad2(dt.getMinutes())}:${pad2(dt.getSeconds())}`,
                `File: ${lastAnalysis.fileName}`,
                `Result: ${resultLabel}`,
                `Confidence: ${lastAnalysis.confidence.toFixed(1)}%`,
                `Normal Probability: ${lastAnalysis.normalPercent.toFixed(1)}%`,
                `Abnormal Probability: ${lastAnalysis.abnormalPercent.toFixed(1)}%`,
                '',
                'Recommended Next Steps:',
                ...steps.map((s, i) => `${i + 1}. ${s}`),
                '',
                'IMPORTANT DISCLAIMER:',
                'This report is automatically generated for educational purposes only.',
                'It does not constitute a medical diagnosis.',
                'Please consult a qualified healthcare professional for proper evaluation.',
                '',
                '(c) 2026 Yazeed Aljuwaybiri - All Rights Reserved'
            ].join('\n');

            const blob = new Blob([reportText], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `report_${safeName}_${dateStr}_${timeStr}.txt`;
            document.body.appendChild(a);
            a.click();
            a.remove();
            URL.revokeObjectURL(url);
        }

        function escapeHtml(input) {
            return String(input)
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#39;');
        }

        function resetForm() {
            imageInput.value = '';
            preview.style.display = 'none';
            resultDiv.style.display = 'none';
            loadingState.style.display = 'none';
            const nextStepsList = document.getElementById('nextStepsList');
            if (nextStepsList) nextStepsList.innerHTML = '';
            lastAnalysis = null;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>
</html>
